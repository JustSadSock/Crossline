# Crossline

Браузерная арена с WebSocket-сервером. Клиент развёрнут как статический сайт (например, на Netlify),
а игровой сервер используется только для внутренних нужд команды и отдается наружу через туннель.

## Что входит

- `/index.html`, `/scripts`, `/styles` — интерфейс лобби и игры.
- `/server` — Node.js/WebSocket-сервер для матчмейкинга и синхронизации.
- `expose-server.bat` — Windows-скрипт, который поднимает сервер локально и сразу публикует его через ngrok.

## Как выдать локальный сервер наружу (Windows)

1. Установите [Node.js LTS](https://nodejs.org/) и [ngrok](https://ngrok.com/). Сохраните путь к `ngrok.exe`.
2. (Опционально) задайте токен `NGROK_AUTHTOKEN`, чтобы туннель поднимался без ручного логина.
3. В корне репозитория запустите `expose-server.bat`. Скрипт:
   - проверит наличие Node.js и npm;
   - установит зависимости (`npm ci`, только при отсутствии `node_modules`);
   - запустит сервер на `http://localhost:3000` в отдельном окне;
   - поднимет ngrok-туннель и выведет публичный URL в консоли;
   - при наличии `monitor-server.ps1` откроет окно мониторинга.
4. Скопируйте опубликованный адрес (формата `https://*.ngrok.app`) и вставьте его в поле «URL сервера» на клиентском сайте.

### Полезные переменные окружения

| Переменная        | Назначение                                                      |
|-------------------|-----------------------------------------------------------------|
| `PORT`            | Локальный порт сервера (по умолчанию `3000`).                   |
| `NGROK_EXE`       | Полный путь до `ngrok.exe`, если он не прописан в `PATH`.       |
| `NGROK_AUTHTOKEN` | Токен авторизации ngrok; если не задан, ngrok запросит вход.    |

## Работа с клиентом

Онлайн-режим требует публичного URL сервера. Без указанного адреса интерфейс предложит его
ввести и заблокирует подключение. Офлайн-режим с ботом доступен без сервера.

## Скрипты npm

- `npm run test` — проверка синтаксиса серверной части (`node --check server/index.js`).

## Минимальный стек

- Node.js 18+
- WebSocket (`ws`)
- Чистый JavaScript, Canvas и CSS для клиента

